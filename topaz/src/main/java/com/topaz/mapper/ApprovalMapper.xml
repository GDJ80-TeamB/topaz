<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.topaz.mapper.ApprovalMapper">
	<select id="selectTemplateDetail" parameterType="map" resultType="map">
		SELECT 
			t.template_no,
			t.reg_id,
			t.reg_time,
			t.mod_id,
			t.mod_time,
			t.use_yn,
			COALESCE(f.original_file_name, '등록된 서식이 없습니다.') AS fileStatus
		FROM 
			approval_template t
			LEFT JOIN 
				file_upload f 
				ON t.template_no = f.reference_no 
				AND f.use_yn = 'Y'
		WHERE 
			t.template_no = #{templateNo}
			AND at.use_yn = 'Y'
	</select>

	<select id="selectTemplate" parameterType="map" resultType="map">
		SELECT 
			t.template_no templateNo,
			t.reg_id regId,
			t.reg_time regTime,
			t.mod_id modId,
			t.mod_time modTime,
			t.use_yn useYn,
			COALESCE(f.original_file_name, '등록된 서식이 없습니다.') AS fileStatus
		FROM 
			approval_template t
		LEFT JOIN 
			file_upload f 
			ON t.template_no = f.reference_no 
			AND f.use_yn = 'Y'
		WHERE 
			f.use_yn = 'Y'
	</select>
</mapper>